<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Chuyá»ƒn Ä‘á»•i Video/MP3 thÃ nh Text</title>
</head>
<body>
    <h1>ğŸ™ï¸ Táº£i video hoáº·c MP3 Ä‘á»ƒ chuyá»ƒn thÃ nh vÄƒn báº£n</h1>
    
    <!-- Form Ä‘á»ƒ upload file video hoáº·c mp3 -->
    <form id="uploadForm" enctype="multipart/form-data">
        <input type="file" name="audio" id="audio" accept="audio/*,video/*">
        <button type="submit">Táº£i lÃªn</button>
    </form>
    
    <p id="status"></p>
    <p><strong>Káº¿t quáº£:</strong> <span id="result"></span></p>

    <!-- NÃºt Ä‘á»ƒ báº¯t Ä‘áº§u nháº­n diá»‡n giá»ng nÃ³i -->
    <h2>ğŸ¤ NÃ³i trá»±c tiáº¿p Ä‘á»ƒ chuyá»ƒn thÃ nh vÄƒn báº£n</h2>
    <button id="startButton">Báº¯t Ä‘áº§u ghi Ã¢m</button>
    <p id="voiceResult"></p>

    <script>
        // Quáº£n lÃ½ ghi Ã¢m vÃ  nháº­n diá»‡n giá»ng nÃ³i
        const startButton = document.getElementById('startButton');
        const voiceResult = document.getElementById('voiceResult');
        
        // Khá»Ÿi táº¡o SpeechRecognition (DÃ nh cho trÃ¬nh duyá»‡t há»— trá»£)
        const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
        recognition.lang = 'vi-VN';  // Cáº¥u hÃ¬nh nháº­n diá»‡n giá»ng nÃ³i tiáº¿ng Viá»‡t

        // Khi nháº­n diá»‡n giá»ng nÃ³i thÃ nh cÃ´ng
        recognition.onresult = function(event) {
            const transcript = event.results[0][0].transcript;
            voiceResult.innerText = `Báº¡n nÃ³i: ${transcript}`;
            
            // Gá»­i dá»¯ liá»‡u giá»ng nÃ³i lÃªn server Ä‘á»ƒ chuyá»ƒn thÃ nh vÄƒn báº£n (cÃ³ thá»ƒ dÃ¹ng Whisper Ä‘á»ƒ xá»­ lÃ½ thÃªm)
            fetch("/transcribeVoice", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ text: transcript })
            })
            .then(response => response.json())
            .then(data => {
                voiceResult.innerText = `Chuyá»ƒn Ä‘á»•i: ${data.text}`;
            })
            .catch(error => {
                voiceResult.innerText = "CÃ³ lá»—i xáº£y ra!";
            });
        };

        // Khi ngÆ°á»i dÃ¹ng nháº¥n nÃºt Ä‘á»ƒ báº¯t Ä‘áº§u ghi Ã¢m
        startButton.onclick = function() {
            recognition.start();
            voiceResult.innerText = "Äang ghi Ã¢m... NÃ³i gÃ¬ Ä‘Ã³!";
        };
    </script>
</body>
</html>
